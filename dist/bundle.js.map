{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack:///./src/content-script.js","webpack:///./utils/color-players.js","webpack:///./utils/score-difference.js"],"sourcesContent":["import { colorPlayers } from \"../utils/color-players\";\nimport { displayScoreDifference } from \"../utils/score-difference\";\n\n// Mutation Observer\nwindow.addEventListener(\"load\", function () {\n    const observer = new MutationObserver(function (mutations) {\n        observer.disconnect();\n\n        mutations.forEach(function (mutation) {\n            main();\n        });\n        observeDOM();\n    });\n\n    function observeDOM() {\n        observer.observe(document.body, {\n            childList: true,\n            characterData: true,\n            subtree: true\n        });\n    }\n    observeDOM();\n});\n\n// Main functionality:\nlet oldPlayers = null; // Store the previous state globally\n\nfunction main() {\n    // Fetch the current players section\n    const allPlayers = document.querySelector(\".player-section\");\n\n    // Ensure that `allPlayers` exists and has changed since the last call\n    if (allPlayers && oldPlayers !== allPlayers.innerHTML) {\n        const users = document.querySelectorAll(\".matchup-row .user\");\n        const scores = document.querySelectorAll(\".matchup-row .user .score\");\n\n        // Apply the custom color formatting and score difference display\n        colorPlayers(allPlayers);\n        displayScoreDifference(users, scores);\n\n        // Update the oldPlayers state to the current one\n        oldPlayers = allPlayers.innerHTML;\n    }\n}\n","export function colorPlayers(allPlayers) {\n    // Reset the colors of in-game items\n    resetInGameItemColors();\n\n    const allPlayersScores = allPlayers ? allPlayers.querySelectorAll(\".player-scoring .score\") : [];\n    // Declare max difference of 2\n    let maxDifference = 0;\n\n    // Calculate the max difference between any 2 players of the same position\n    for (let i = 0; i < allPlayersScores.length; i += 2) {\n        const score1 = parseFloat(allPlayersScores[i].textContent.trim()) || 0;\n        const score2 = parseFloat(allPlayersScores[i + 1].textContent.trim()) || 0;\n        maxDifference = Math.max(maxDifference, Math.abs(score1 - score2));\n    }\n\n    // Iterate through each player score and apply colors\n    for (let i = 0; i < allPlayersScores.length; i += 2) {\n        const score1Element = allPlayersScores[i];\n        const score2Element = allPlayersScores[i + 1];\n        // console.log(\"Score 1:\", score1Element);\n        // console.log(\"Score 2:\", score2Element);\n\n        if (!score2Element) continue; // Skip if the second score is undefined\n\n        const isScore1Dash = score1Element.textContent.trim() === \"-\";\n        const isScore2Dash = score2Element.textContent.trim() === \"-\";\n        let score1 = isScore1Dash ? 0 : parseFloat(score1Element.textContent);\n        let score2 = isScore2Dash ? 0 : parseFloat(score2Element.textContent);\n\n        const difference = parseFloat((score1 - score2).toFixed(2));\n        const intensity = Math.abs(difference) / maxDifference * 0.15 + 0.05;\n\n        const playerItem1 = score1Element.closest('.matchup-player-item'),\n              playerItem2 = score2Element.closest('.matchup-player-item');\n\n        playerItem1.style.borderRadius = playerItem2.style.borderRadius = '8px';\n        \n        if (score1 < score2) {\n            playerItem1.style.backgroundColor = `rgba(255, 0, 0, ${intensity})`;\n            playerItem2.style.backgroundColor = `rgba(0, 128, 0, ${intensity})`;\n        } else if (score1 > score2) {\n            playerItem1.style.backgroundColor = `rgba(0, 128, 0, ${intensity})`;\n            playerItem2.style.backgroundColor = `rgba(255, 0, 0, ${intensity})`;\n        }\n        // } else if (score1 === 0 || score2 === 0){\n        //     playerItem1.style.backgroundColor = `rgba(255, 255, 0, ${intensity + 0.05})`;\n        //     playerItem2.style.backgroundColor = `rgba(255, 255, 0, ${intensity + 0.05})`;\n        // }\n\n        console.log(\"DIFFERENCE: \", difference);\n        function formatDifference(difference) {\n            // Ensure difference has two decimal places\n            let formattedDifference = difference.toFixed(2);\n\n            // Add .00 or .x0 if needed\n            if (!formattedDifference.includes('.')) {\n                formattedDifference += '.00';\n            } else if (formattedDifference.split('.')[1].length === 1) {\n                formattedDifference += '0';\n            }\n\n            return formattedDifference;\n        }\n\n        const uniqueId1 = `difference-${i}`;\n        const uniqueId2 = `difference-${i + 1}`;\n\n        // Find or create the difference element for score1\n        let differenceElement1 = document.querySelector(`#${uniqueId1}`);\n        if (!differenceElement1) {\n            differenceElement1 = document.createElement('div');\n            differenceElement1.id = uniqueId1;\n            differenceElement1.className = 'score-difference-added'; // Optional: Add a class for styling\n            differenceElement1.style.fontSize = '9px';\n            differenceElement1.style.textAlign = 'center';\n            differenceElement1.style.marginTop = '3px';\n            score1Element.parentNode.insertBefore(differenceElement1, score1Element.nextSibling);\n        }\n        // Update text content of the existing or newly created element\n        differenceElement1.textContent = difference > 0 ? `+${formatDifference(difference)}` : formatDifference(difference);\n        differenceElement1.style.color = difference > 0 ? 'rgb(4,204,188)' : (difference < 0 ? 'rgb(251,44,107)' : 'white');\n\n        // Find or create the difference element for score2\n        let differenceElement2 = document.querySelector(`#${uniqueId2}`);\n        if (!differenceElement2) {\n            differenceElement2 = document.createElement('div');\n            differenceElement2.id = uniqueId2;\n            differenceElement2.className = 'score-difference-added'; // Optional: Add a class for styling\n            differenceElement2.style.fontSize = '9px';\n            differenceElement2.style.textAlign = 'center';\n            differenceElement2.style.marginTop = '3px';\n            score2Element.parentNode.insertBefore(differenceElement2, score2Element.nextSibling);\n        }\n        // Calculate the difference for score2Element\n        let differenceScore2 = parseFloat((score2 - score1).toFixed(2));\n\n        // Update text content of the existing or newly created element\n        differenceElement2.textContent = differenceScore2 > 0 ? `+${formatDifference(differenceScore2)}` : formatDifference(differenceScore2);\n        differenceElement2.style.color = differenceScore2 < 0 ? 'rgb(251,44,107)' : (differenceScore2 > 0 ? 'rgb(4,204,188)' : 'white');\n    }\n}\n\nfunction resetInGameItemColors() {\n    const inGameItems = document.querySelectorAll(\".matchup-player-body-item.in-game-flip\");\n\n    inGameItems.forEach(item => {\n        // Reset styles of the main element\n        item.style.backgroundColor = 'transparent'; // Set background to transparent\n        item.style.color = ''; // Reset color\n\n        // Reset styles of child elements\n        const allChildren = item.querySelectorAll(\"*\");\n        allChildren.forEach(child => {\n            child.style.backgroundColor = 'transparent'; // Reset background color of child elements\n            child.style.color = ''; // Reset text color\n            child.style.border = ''; // Reset any borders\n        });\n    });\n}\n","// src/scoreDifference.js\n\nexport function displayScoreDifference(users, scores) {\n    console.log('displayScoreDifference function is running');\n\n    let retryCount = 0;\n    const maxRetries = 1;\n\n    // Check scores function\n    function checkScores() {\n        // Users and Scores captured:\n        if (users.length === 2 && scores.length === 2) {\n            // Check if either score contains '-'\n            const isScore1Dash = scores[0].textContent.trim() === \"-\";\n            const isScore2Dash = scores[1].textContent.trim() === \"-\";\n\n            // Declare my score and opponent's score \n            let myScore = isScore1Dash ? 0 : parseFloat(scores[0].textContent);\n            let opponentScore = isScore2Dash ? 0 : parseFloat(scores[1].textContent);\n\n            // Difference:\n            const difference = myScore - opponentScore;\n\n            // Add difference element:\n            let displayText = \"\";\n            // Losing (negative difference):\n            if (difference < 0) {\n                displayText = `Losing by ${difference.toFixed(2)}`;\n            // Winning (positive difference):\n            } else if (difference > 0) {\n                displayText = `Winning by ${difference.toFixed(2)}`;\n            // Tied:\n            } else {\n                displayText = 'Tied';\n            }\n\n            // Create or update element scoreDifferenceDisplay\n            let differenceElement = document.querySelector(\"#scoreDifferenceDisplay\");\n\n            if (!differenceElement) {\n                differenceElement = document.createElement(\"div\");\n                differenceElement.id = \"scoreDifferenceDisplay\";\n                document.body.appendChild(differenceElement);\n            }\n            \n            // Update display element traits:\n            differenceElement.textContent = displayText;\n            differenceElement.style.padding = '10px';\n            differenceElement.style.textAlign = 'center';\n            differenceElement.style.backgroundColor = difference < 0 ? 'rgba(255, 0, 0, 0.15)' : (difference === 0 ? 'rgba(64, 64, 64, 0.15)' : 'rgba(0, 128, 0, 0.15)');\n            differenceElement.style.fontSize = '16px';\n            differenceElement.style.marginTop = '0px';\n            differenceElement.style.marginBottom = '10px';\n            differenceElement.style.borderRadius = '8px';\n\n            // Insert the element:\n            const matchupHeader = document.querySelector('.matchup-row');\n            if (matchupHeader && matchupHeader.parentNode) {\n                matchupHeader.parentNode.insertBefore(differenceElement, matchupHeader.nextSibling);\n            }\n\n            // Change colors for header:\n            const ownerItems = document.querySelectorAll('.matchup-owner-item');\n            if (ownerItems.length === 2) {\n                const ownerItem1 = ownerItems[0];\n                const ownerItem2 = ownerItems[1];\n                if (difference < 0) {\n                    ownerItem1.style.backgroundColor = 'rgba(255, 0, 0, 0.15)';\n                    ownerItem2.style.backgroundColor = 'rgba(0, 128, 0, 0.15)';\n                } else if (difference > 0) {\n                    ownerItem1.style.backgroundColor = 'rgba(0, 128, 0, 0.15)';\n                    ownerItem2.style.backgroundColor = 'rgba(255, 0, 0, 0.15)';\n                } else {  // tie\n                    ownerItem1.style.backgroundColor = 'rgba(64, 64, 64, 0.15)';\n                    ownerItem2.style.backgroundColor = 'rgba(64, 64, 64, 0.15)';                                    \n                }\n            }\n        } else if (retryCount >= maxRetries) {\n            console.log('Max retries reached, giving up...');\n        } else {\n            console.log('Could not find the scores, retrying...');\n            retryCount++;\n            setTimeout(checkScores, 1000); // Retry after a short delay\n        }\n    }\n\n    checkScores();\n}\n"],"names":["window","addEventListener","observer","MutationObserver","mutations","disconnect","forEach","mutation","allPlayers","document","querySelector","oldPlayers","innerHTML","users","querySelectorAll","scores","item","style","backgroundColor","color","child","border","allPlayersScores","maxDifference","i","length","score1","parseFloat","textContent","trim","score2","Math","max","abs","score1Element","score2Element","isScore1Dash","isScore2Dash","difference","toFixed","intensity","playerItem1","closest","playerItem2","formatDifference","formattedDifference","includes","split","borderRadius","console","log","uniqueId1","uniqueId2","differenceElement1","createElement","id","className","fontSize","textAlign","marginTop","parentNode","insertBefore","nextSibling","differenceElement2","differenceScore2","colorPlayers","retryCount","checkScores","displayText","differenceElement","body","appendChild","padding","marginBottom","matchupHeader","ownerItems","ownerItem1","ownerItem2","setTimeout","displayScoreDifference","main","observeDOM","observe","childList","characterData","subtree"],"sourceRoot":""}